# =============================================================================
# HRPLATFORM - Environment Variables (Vercel + Supabase Setup)
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to git!
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=HRPlatform CRM
APP_VERSION=0.1.0
APP_PORT=3000 # Company CRM Portal

# -----------------------------------------------------------------------------
# Database (Supabase PostgreSQL)
# -----------------------------------------------------------------------------
# Get these from your Supabase project settings
# Project Settings > Database > Connection string

# Transaction pooler (for serverless functions)
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres"

# Session pooler (for long-running processes)
DIRECT_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:6543/postgres?pgbouncer=true"

# Example:
# DATABASE_URL="postgresql://postgres:your-password@db.abcdefghijklmnop.supabase.co:5432/postgres"
# DIRECT_URL="postgresql://postgres:your-password@db.abcdefghijklmnop.supabase.co:6543/postgres?pgbouncer=true"

# -----------------------------------------------------------------------------
# Supabase
# -----------------------------------------------------------------------------
# Get these from your Supabase project settings
# Project Settings > API

NEXT_PUBLIC_SUPABASE_URL="https://[YOUR-PROJECT-REF].supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOi..." # Your anon/public key
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOi..." # Your service role key (keep secret!)

# Supabase Storage Bucket
SUPABASE_STORAGE_BUCKET="documents"

# -----------------------------------------------------------------------------
# Redis (Optional - for local dev or Upstash for production)
# -----------------------------------------------------------------------------
# Local Docker Redis
REDIS_URL="redis://:hrplatform_redis_password@localhost:6379"

# Or use Upstash Redis (serverless, free tier available)
# REDIS_URL="rediss://default:[password]@[endpoint].upstash.io:6379"

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=hrplatform_redis_password
REDIS_DB=0

# Session Configuration
SESSION_SECRET="change-this-to-a-random-32-byte-string-in-production"
SESSION_MAX_AGE=604800 # 7 days in seconds

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# JWT Configuration (if using custom JWT instead of Supabase Auth)
JWT_SECRET="change-this-to-a-strong-secret-key-min-32-chars"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_SECRET="change-this-to-another-strong-secret"
JWT_REFRESH_EXPIRES_IN="7d"

# Encryption for PII (Aadhaar, PAN, Bank Account, etc.)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY="0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef"
ENCRYPTION_ALGORITHM="aes-256-gcm"

# Password Hashing
BCRYPT_ROUNDS=12

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000 # 1 minute
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# Logging & Monitoring
# -----------------------------------------------------------------------------
# Log Level: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info

# Enable different log transports
LOG_TO_CONSOLE=true
LOG_TO_FILE=true
LOG_TO_ELASTICSEARCH=false # Set to true when you add ELK

# File logging paths
LOG_FILE_PATH=./logs/combined.log
LOG_ERROR_FILE_PATH=./logs/error.log
LOG_AUDIT_FILE_PATH=./logs/audit.log

# Log retention (days)
LOG_RETENTION_DAYS=90

# Elasticsearch (when you're ready to use ELK)
# ELASTICSEARCH_NODE=http://localhost:9200
# ELASTICSEARCH_INDEX_PREFIX=hrplatform-logs
# ELASTICSEARCH_USERNAME=
# ELASTICSEARCH_PASSWORD=

# -----------------------------------------------------------------------------
# Email (Development: Mailhog, Production: Resend/SendGrid)
# -----------------------------------------------------------------------------
# For local development (Mailhog)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=

# For production (Resend - recommended for Vercel)
# RESEND_API_KEY=re_...
# FROM_EMAIL=noreply@hrplatform.com

# Or SendGrid
# SENDGRID_API_KEY=SG.xxxxx

FROM_EMAIL=noreply@hrplatform.com
FROM_NAME=HRPlatform

# -----------------------------------------------------------------------------
# SMS (Twilio)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
TWILIO_VERIFY_SERVICE_SID= # For OTP

# -----------------------------------------------------------------------------
# URLs
# -----------------------------------------------------------------------------
# Development
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3000/api

# Production (update when deploying)
# NEXT_PUBLIC_APP_URL=https://your-crm-app.vercel.app
# NEXT_PUBLIC_API_URL=https://your-crm-app.vercel.app/api

# Frontend URLs (for CORS)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_ANALYTICS=true
ENABLE_BACKGROUND_JOBS=false # Enable in Stage 2+
ENABLE_REDIS_CACHE=false # Enable when you need caching
ENABLE_RATE_LIMITING=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=false

# -----------------------------------------------------------------------------
# Multi-tenancy
# -----------------------------------------------------------------------------
MULTI_TENANT_MODE=row_level_security # Use RLS with Supabase
DEFAULT_TENANT_TIER=FREE

# -----------------------------------------------------------------------------
# Compliance & Security
# -----------------------------------------------------------------------------
# Data retention (days)
DATA_RETENTION_ACTIVE_EMPLOYEES=0 # Forever
DATA_RETENTION_SEPARATED_EMPLOYEES=2555 # 7 years (India compliance)
DATA_RETENTION_PAYROLL_RECORDS=2555 # 7 years
DATA_RETENTION_AUDIT_LOGS=2555 # 7 years

# Security headers
ENABLE_HELMET=true
ENABLE_CORS=true
ENABLE_CSRF_PROTECTION=true

# -----------------------------------------------------------------------------
# Payment Gateway (for Super Admin billing)
# -----------------------------------------------------------------------------
# Razorpay (India)
RAZORPAY_KEY_ID=
RAZORPAY_KEY_SECRET=
RAZORPAY_WEBHOOK_SECRET=

# Stripe (International)
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# Vercel Configuration
# -----------------------------------------------------------------------------
# These are automatically set by Vercel, but you can override locally
# VERCEL=1
# VERCEL_ENV=development
# VERCEL_URL=your-app.vercel.app

# -----------------------------------------------------------------------------
# Development Tools
# -----------------------------------------------------------------------------
# Enable debug mode
DEBUG=false

# Hot reload
WATCHPACK_POLLING=true

# -----------------------------------------------------------------------------
# Testing
# -----------------------------------------------------------------------------
# For running tests (use a separate test database)
# TEST_DATABASE_URL="postgresql://postgres:password@localhost:54321/hrplatform_test"
