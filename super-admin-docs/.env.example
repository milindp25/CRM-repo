# =============================================================================
# HRPLATFORM SUPER ADMIN - Environment Variables
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to git!
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=HRPlatform Super Admin
APP_VERSION=0.1.0
APP_PORT=3001

# -----------------------------------------------------------------------------
# Database (Supabase - SHARED WITH CRM APP)
# -----------------------------------------------------------------------------
# IMPORTANT: Use the SAME Supabase database as the CRM app
# Get these from your Supabase project settings

# Direct connection (for Super Admin with service role)
DATABASE_URL="postgresql://postgres.[YOUR-PROJECT-REF]:password@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres"
DIRECT_URL="postgresql://postgres.[YOUR-PROJECT-REF]:password@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres"

# Example (use your actual Supabase credentials):
# DATABASE_URL="postgresql://postgres.pinkjzyuvfudpvndjmhq:YourPassword@aws-1-ap-south-1.pooler.supabase.com:5432/postgres"
# DIRECT_URL="postgresql://postgres.pinkjzyuvfudpvndjmhq:YourPassword@aws-1-ap-south-1.pooler.supabase.com:5432/postgres"

# -----------------------------------------------------------------------------
# Supabase (SHARED WITH CRM APP)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_SUPABASE_URL="https://[YOUR-PROJECT-REF].supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOi..." # Your anon/public key

# CRITICAL: Super Admin needs SERVICE ROLE KEY to bypass RLS
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOi..." # Your service role key (KEEP SECRET!)

# Storage bucket (shared with CRM)
SUPABASE_STORAGE_BUCKET="documents"

# -----------------------------------------------------------------------------
# Super Admin Authentication & Security
# -----------------------------------------------------------------------------
# IMPORTANT: Use DIFFERENT secrets from CRM app for security isolation

# Super Admin JWT (different from CRM JWT)
SUPER_ADMIN_JWT_SECRET="generate-a-strong-secret-min-64-chars-for-super-admin"
SUPER_ADMIN_JWT_EXPIRES_IN="30m" # Short session for security

# Super Admin Session
SUPER_ADMIN_SESSION_SECRET="generate-another-strong-secret-for-sessions"
SUPER_ADMIN_SESSION_MAX_AGE=1800 # 30 minutes in seconds

# Password Hashing
BCRYPT_ROUNDS=12

# Rate Limiting (stricter for Super Admin)
RATE_LIMIT_WINDOW_MS=60000 # 1 minute
RATE_LIMIT_MAX_REQUESTS=50 # Lower than CRM app

# -----------------------------------------------------------------------------
# Billing - Stripe (International)
# -----------------------------------------------------------------------------
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_PUBLIC_KEY="pk_test_..." # or pk_live_... for production
STRIPE_SECRET_KEY="sk_test_..." # or sk_live_... for production
STRIPE_WEBHOOK_SECRET="whsec_..." # From Stripe webhook settings

# Stripe Price IDs for subscription plans
STRIPE_PRICE_ID_FREE="price_..."
STRIPE_PRICE_ID_BASIC="price_..."
STRIPE_PRICE_ID_PREMIUM="price_..."
STRIPE_PRICE_ID_ENTERPRISE="price_..."

# -----------------------------------------------------------------------------
# Billing - Razorpay (India)
# -----------------------------------------------------------------------------
# Get from: https://dashboard.razorpay.com/app/keys
RAZORPAY_KEY_ID="rzp_test_..." # or rzp_live_... for production
RAZORPAY_KEY_SECRET="your_secret_key"
RAZORPAY_WEBHOOK_SECRET="your_webhook_secret"

# Razorpay Plan IDs
RAZORPAY_PLAN_ID_FREE="plan_..."
RAZORPAY_PLAN_ID_BASIC="plan_..."
RAZORPAY_PLAN_ID_PREMIUM="plan_..."
RAZORPAY_PLAN_ID_ENTERPRISE="plan_..."

# -----------------------------------------------------------------------------
# Redis (for caching and rate limiting)
# -----------------------------------------------------------------------------
# Use Upstash Redis (serverless, works with Vercel)
REDIS_URL="rediss://default:[password]@[endpoint].upstash.io:6379"
REDIS_TOKEN="your_upstash_token"

# Or local Redis for development
# REDIS_URL="redis://localhost:6379"

# -----------------------------------------------------------------------------
# Logging & Monitoring
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_TO_CONSOLE=true
LOG_TO_FILE=true
LOG_TO_ELASTICSEARCH=false # Enable if you add ELK stack

# Sentry (for error tracking)
# SENTRY_DSN="https://..."

# -----------------------------------------------------------------------------
# URLs
# -----------------------------------------------------------------------------
# Development
NEXT_PUBLIC_APP_URL=http://localhost:3001
NEXT_PUBLIC_API_URL=http://localhost:3001/api

# CRM App URL (for integration)
CRM_APP_URL=http://localhost:3000

# Production (update when deploying)
# NEXT_PUBLIC_APP_URL=https://admin.hrplatform.com
# NEXT_PUBLIC_API_URL=https://admin.hrplatform.com/api
# CRM_APP_URL=https://app.hrplatform.com

# Allowed origins (for CORS)
ALLOWED_ORIGINS=http://localhost:3001

# -----------------------------------------------------------------------------
# Email (for sending admin notifications)
# -----------------------------------------------------------------------------
# Using Resend (recommended for Vercel)
RESEND_API_KEY="re_..."
FROM_EMAIL=admin@hrplatform.com
FROM_NAME=HRPlatform Admin

# Or use SMTP
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password

# -----------------------------------------------------------------------------
# Feature Flags (Super Admin specific)
# -----------------------------------------------------------------------------
ENABLE_COMPANY_CREATION=true
ENABLE_BILLING_MANAGEMENT=true
ENABLE_USER_IMPERSONATION=true # For support
ENABLE_AUDIT_LOG_VIEWER=true
ENABLE_ANALYTICS_DASHBOARD=true

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# IP Whitelist (optional - restrict Super Admin access by IP)
# ALLOWED_IPS=123.45.67.89,98.76.54.32

# Enable 2FA (recommended)
ENABLE_TWO_FACTOR_AUTH=true

# Session timeout (minutes)
SESSION_TIMEOUT=30

# Force HTTPS
FORCE_HTTPS=true

# -----------------------------------------------------------------------------
# Analytics
# -----------------------------------------------------------------------------
# Google Analytics (optional)
# NEXT_PUBLIC_GA_ID=G-...

# Mixpanel (optional)
# MIXPANEL_TOKEN=...

# -----------------------------------------------------------------------------
# Vercel Configuration
# -----------------------------------------------------------------------------
# These are automatically set by Vercel
# VERCEL=1
# VERCEL_ENV=development
# VERCEL_URL=admin-hrplatform.vercel.app

# -----------------------------------------------------------------------------
# Development Tools
# -----------------------------------------------------------------------------
DEBUG=false
WATCHPACK_POLLING=true

# -----------------------------------------------------------------------------
# IMPORTANT NOTES
# -----------------------------------------------------------------------------
# 1. Use the SAME database as CRM app (Supabase connection strings)
# 2. Use DIFFERENT JWT secrets from CRM app (security isolation)
# 3. Super Admin requires SUPABASE_SERVICE_ROLE_KEY (bypasses RLS)
# 4. Keep .env.local in .gitignore (NEVER commit)
# 5. Use environment variables in Vercel for production deployment
